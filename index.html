<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Sorteo 200 Números</title>

<style>
    body {
        background: #f4f4f4;
        font-family: Arial, sans-serif;
        padding: 20px;
    }

    /* LOADER */
    #loader {
        width: 60px;
        height: 60px;
        border: 6px solid #ccc;
        border-top-color: #4caf50;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 40px auto;
    }
    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* CONTENEDOR DE LOS NÚMEROS */
    #numeros {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 12px;
        margin-top: 20px;
    }

    .numero {
        width: 85px;
        height: 85px;
        background: white;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 22px;
        font-weight: bold;
        border: 3px solid #aaa;
        box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    }

    .completo {
        background: #4caf50;
        border-color: #2d742f;
        color: white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.25);
    }
</style>

</head>
<body>

<div id="loader"></div>
<div id="numeros"></div>

<script>
// NUEVO CSV (actualizado con tu link)
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQA63Z-H9RKQrD0Cubr0HcX3_FK5CTkjJTTzYO3shHFiSXA2U9qGAnMqQIgJ3cBEBJVExYypESNriOD/pub?gid=0&single=true&output=csv";

function parseCSV(text) {
    return text.trim().split("\n").map(row => row.split(","));
}

fetch(CSV_URL)
    .then(r => r.text())
    .then(csv => {
        const rows = parseCSV(csv);
        const contenedor = document.getElementById("numeros");

        rows.forEach((fila, i) => {
            if (i === 0) return; // encabezado

            const numero = fila[0];    // N_rifa
            const campos = fila.slice(1, 5); // DNI, Nombre, Contacto

            const completo = campos.every(c => c.trim() !== "");

            const div = document.createElement("div");
            div.className = "numero" + (completo ? " completo" : "");
            div.textContent = numero;

            contenedor.appendChild(div);
        });

        document.getElementById("loader").style.display = "none";
    })
    .catch(() => {
        document.getElementById("loader").style.display = "none";
        const error = document.createElement("p");
        error.textContent = "Connection failure. Google Sheets otra vez haciendo de las suyas.";
        document.body.appendChild(error);
    });
</script>

</body>
</html>
