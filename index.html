<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Sorteo</title>

<style>
    body { background: #f4f4f4; font-family: Arial; padding: 20px; }
    #numeros { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; }
    .numero {
        width: 85px; height: 85px; border-radius: 50%;
        background: white; border: 3px solid #aaa;
        display: flex; justify-content: center; align-items: center;
        font-size: 22px; font-weight: bold;
        box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    }
    .completo {
        background: #4caf50; border-color: #2d742f; color: white;
    }
</style>
</head>
<body>

<div id="numeros"></div>

<script>
const CSV_URL =
  "https://api.allorigins.win/raw?url=" +
  encodeURIComponent(
    "https://docs.google.com/spreadsheets/d/1tIPI57LEoj73SmYj31A_vrXQNUTO-PUzgZQpEg2CQ-o/export?format=csv&gid=0"
  );

function parseCSV(text) {
  return text.trim().split("\n").map(r => r.split(","));
}

fetch(CSV_URL)
  .then(r => r.text())
  .then(csv => {
    const rows = parseCSV(csv);
    const div = document.getElementById("numeros");

    rows.forEach((fila, i) => {
      if (i === 0) return;

      const dni = fila[0].trim();
      const nombre = fila[1].trim();
      const contacto = fila[2].trim();
      const numero = fila[3].trim();

      const complete = dni && nombre && contacto && numero;

      const bubble = document.createElement("div");
      bubble.className = "numero" + (complete ? " completo" : "");
      bubble.textContent = numero;

      div.appendChild(bubble);
    });
  })
  .catch(err => {
    document.body.innerHTML += "<p>Error fatal: el universo otra vez en tu contra.</p>";
  });
</script>

</body>
</html>
